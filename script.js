const translations = {
  en: {
    'nav.features': 'What We Do',
    'nav.contact': 'Contact',
    'nav.subscribe': 'Be the First to Know',
    'nav.about': 'Who We Are',
    'hero.comingSoon': 'Coming Soon',
    'hero.title': 'Simplify <span class="highlight">Dorm Life</span>',
    'hero.description': 'With Dormy, digitize your dorm processes, manage reservations, report issues instantly, and stay connected with your dormmates. All your dorm needs, now in your pocket!',
    'hero.cta': 'Be the First to Know',
    'app.greeting': 'Hello, Student!',
    'app.reserve': 'Reserve',
    'app.report': 'Report',
    'app.share': 'Share',
    'app.notifTitle': 'Water Outage',
    'app.notifText': 'Tomorrow 10:00-14:00',
    'app.reservations': 'Reservations',
    'app.laundry': 'Laundry Room',
    'app.slotsAvailable': '5 slots available',
    'app.studyRoom': 'Study Room',
    'app.slotsAvailable2': '3 slots available',
    'app.commonArea': 'Common Area',
    'app.slotsAvailable3': '2 slots available',
    'app.reportIssue': 'Report Issue',
    'app.selectCategory': 'Select Category',
    'app.plumbing': 'Plumbing',
    'app.electrical': 'Electrical',
    'app.furniture': 'Furniture',
    'app.describeIssue': 'Describe the issue...',
    'app.submit': 'Submit',
    'app.notifications': 'Notifications',
    'app.eventTonight': 'Event Tonight!',
    'app.movieNight': 'Movie night at 8 PM',
    'app.issueResolved': 'Issue Resolved',
    'app.plumbingFixed': 'Plumbing issue fixed',
    'app.reservationConf': 'Reservation Confirmed',
    'app.laundryTomorrow': 'Laundry - Tomorrow 2PM',
    'features.title': 'What We Do',
    'features.subtitle': 'Smart solutions to simplify dorm life',
    'features.reservation.title': 'Online Reservation System',
    'features.reservation.desc': 'Easily book laundry rooms, study halls, and common areas. No more waiting in line!',
    'features.issue.title': 'Smart Issue Reporting',
    'features.issue.desc': 'Report room issues instantly and track your request status. Quick solutions, happy students!',
    'features.sharing.title': 'Dorm Sharing System',
    'features.sharing.desc': 'Share items with dormmates, exchange study notes, learn together and save!',
    'features.faq.title': 'FAQ Module',
    'features.faq.desc': 'Access dorm rules, procedures, and FAQs instantly. The info you need, always at hand!',
    'features.notifications.title': 'Instant Notifications',
    'features.notifications.desc': 'Stay informed about events, outages, and important announcements. Never miss a thing!',
    'features.more.title': 'And Much More',
    'features.more.desc': 'Discover additional features designed to make your dorm experience even better!',
    'subscribe.title': 'Be the First to Know',
    'subscribe.subtitle': 'Dormy is launching soon! Leave your email to be the first to hear about launch news and exclusive updates.',
    'subscribe.emailPlaceholder': 'Your email address',
    'subscribe.notRobot': "I'm not a robot",
    'subscribe.button': 'Be the First to Know',
    'faq.title': 'Frequently Asked Questions',
    'faq.q1': 'What is Dormy?',
    'faq.a1': 'Dormy is a mobile application designed to simplify daily dorm life for university students. Reservations, issue reporting, announcements, and more - all in one app!',
    'faq.q2': 'When will the app be released?',
    'faq.a2': 'Dormy will be available very soon! Join our email list to be the first to know about the launch date.',
    'faq.q3': 'Which dorms will it be available in?',
    'faq.a3': 'Dormy will initially launch at METU dormitories and aims to expand to other university dorms over time.',
    'faq.q4': 'Is the app free?',
    'faq.a4': 'Yes! Dormy will be completely free for students.',
    'about.title': 'Who We Are',
    'about.missionTitle': 'Our Mission',
    'about.missionText': "To make students' daily lives practical and effortless by digitizing dorm life, while providing dorm management with data-driven decision-making capabilities.",
    'about.visionTitle': 'Our Vision',
    'about.visionText': 'To become the pioneer of digital dorm management, transforming the student experience in university dormitories across Turkey.',
    'about.teamTitle': 'Our Team',
    'about.teamIntro': 'Dormy is being developed by a solution-oriented student team who has personally experienced the challenges of dorm life.',
    'contact.title': 'Contact',
    'contact.getInTouch': 'Get in Touch',
    'contact.description': 'Have questions, suggestions, or partnership proposals? Feel free to reach out to us.',
    'contact.sendMessage': 'Send a Message',
    'contact.emailPlaceholder': 'Your email address',
    'contact.messagePlaceholder': 'Your message',
    'contact.send': 'Send',
    'footer.tagline': 'Simplifying dorm life.',
    'footer.copyright': '© 2024 Dormy. All rights reserved.',
    'messages.robotCheck': 'Please confirm you are not a robot.',
    'messages.invalidEmail': 'Please enter a valid email address.',
    'messages.subscribeSuccess': 'Thank you! You have successfully joined our email list.',
    'messages.messageShort': 'Your message must be at least 10 characters.',
    'messages.messageReady': 'Your message is ready. Your email app will open.'
  },
  tr: {
    'nav.features': 'Ne Yapıyoruz',
    'nav.contact': 'İletişim',
    'nav.subscribe': 'Önce Senin Haberin Olsun',
    'nav.about': 'Biz Kimiz',
    'hero.comingSoon': 'Çok Yakında',
    'hero.title': 'Yurt Hayatını <span class="highlight">Kolaylaştır</span>',
    'hero.description': 'Dormy ile yurt süreçlerini dijitalleştir, rezervasyonlarını yönet, arıza bildirimlerini anında ilet ve yurt arkadaşlarınla bağlantıda kal. Tüm yurt işlemlerin artık cebinde!',
    'hero.cta': 'Önce Senin Haberin Olsun',
    'app.greeting': 'Merhaba, Öğrenci!',
    'app.reserve': 'Rezervasyon',
    'app.report': 'Bildir',
    'app.share': 'Paylaş',
    'app.notifTitle': 'Su Kesintisi',
    'app.notifText': 'Yarın 10:00-14:00',
    'app.reservations': 'Rezervasyonlar',
    'app.laundry': 'Çamaşırhane',
    'app.slotsAvailable': '5 yer müsait',
    'app.studyRoom': 'Etüt Odası',
    'app.slotsAvailable2': '3 yer müsait',
    'app.commonArea': 'Ortak Alan',
    'app.slotsAvailable3': '2 yer müsait',
    'app.reportIssue': 'Arıza Bildir',
    'app.selectCategory': 'Kategori Seç',
    'app.plumbing': 'Tesisat',
    'app.electrical': 'Elektrik',
    'app.furniture': 'Mobilya',
    'app.describeIssue': 'Sorunu açıklayın...',
    'app.submit': 'Gönder',
    'app.notifications': 'Bildirimler',
    'app.eventTonight': 'Bu Akşam Etkinlik!',
    'app.movieNight': 'Saat 20:00 film gecesi',
    'app.issueResolved': 'Arıza Çözüldü',
    'app.plumbingFixed': 'Tesisat sorunu giderildi',
    'app.reservationConf': 'Rezervasyon Onaylandı',
    'app.laundryTomorrow': 'Çamaşırhane - Yarın 14:00',
    'features.title': 'Ne Yapıyoruz?',
    'features.subtitle': 'Yurt hayatını kolaylaştıran akıllı çözümler',
    'features.reservation.title': 'Çevrimiçi Rezervasyon Sistemi',
    'features.reservation.desc': 'Çamaşırhane, etüt odası ve ortak alanlar için kolayca rezervasyon yap. Sıra beklemek artık tarih oldu!',
    'features.issue.title': 'Akıllı Arıza ve Talep Bildirimi',
    'features.issue.desc': 'Odandaki arızaları anında bildir, talebinin durumunu takip et. Hızlı çözüm, mutlu öğrenci!',
    'features.sharing.title': 'Yurt İçi Paylaşım Sistemi',
    'features.sharing.desc': 'Yurt arkadaşlarınla eşya paylaş, ders notu al-ver, birlikte öğren ve tasarruf et!',
    'features.faq.title': 'SSS Modülü',
    'features.faq.desc': 'Yurt kuralları, işleyiş ve sık sorulan sorulara anında ulaş. İhtiyacın olan bilgi hep yanında!',
    'features.notifications.title': 'Anlık Bildirim Sistemi',
    'features.notifications.desc': 'Etkinlikler, kesintiler ve önemli duyurulardan anında haberdar ol. Hiçbir şeyi kaçırma!',
    'features.more.title': 'Ve Daha Fazlası',
    'features.more.desc': 'Yurt deneyimini daha da iyi hale getirmek için tasarlanmış ek özellikleri keşfet!',
    'subscribe.title': 'Önce Senin Haberin Olsun',
    'subscribe.subtitle': 'Dormy çok yakında yayında! E-posta adresini bırak, lansman haberlerini ve özel güncellemeleri ilk sen al.',
    'subscribe.emailPlaceholder': 'E-posta adresin',
    'subscribe.notRobot': 'Robot değilim',
    'subscribe.button': 'Önce Senin Haberin Olsun',
    'faq.title': 'Sıkça Sorulan Sorular',
    'faq.q1': 'Dormy nedir?',
    'faq.a1': 'Dormy, üniversite yurtlarında kalan öğrencilerin günlük yurt hayatını kolaylaştırmak için tasarlanmış bir mobil uygulamadır. Rezervasyon, arıza bildirimi, duyurular ve daha fazlası tek bir uygulamada!',
    'faq.q2': 'Uygulama ne zaman yayınlanacak?',
    'faq.a2': 'Dormy çok yakında yayında olacak! E-posta listemize kaydolarak lansman tarihinden ilk sen haberdar olabilirsin.',
    'faq.q3': 'Hangi yurtlarda kullanılabilir?',
    'faq.a3': 'İlk aşamada ODTÜ yurtlarında kullanıma sunulacak olan Dormy, zamanla diğer üniversite yurtlarına da genişlemeyi hedefliyor.',
    'faq.q4': 'Uygulama ücretsiz mi?',
    'faq.a4': 'Evet! Dormy, öğrenciler için tamamen ücretsiz olacak.',
    'about.title': 'Biz Kimiz',
    'about.missionTitle': 'Misyonumuz',
    'about.missionText': 'Yurt hayatını dijitalleştirerek öğrencilerin günlük yaşamını pratik ve zahmetsiz hale getirmek, yurt yönetimlerine veriye dayalı karar alma imkanı sunmak.',
    'about.visionTitle': 'Vizyonumuz',
    'about.visionText': "Türkiye'nin tüm üniversite yurtlarında öğrenci deneyimini dönüştüren, dijital yurt yönetiminin öncüsü olmak.",
    'about.teamTitle': 'Ekibimiz',
    'about.teamIntro': 'Dormy, yurt hayatının zorluklarını bizzat yaşamış, çözüm odaklı bir öğrenci ekibi tarafından geliştirilmektedir.',
    'contact.title': 'İletişim',
    'contact.getInTouch': 'Bize Ulaşın',
    'contact.description': 'Sorularınız, önerileriniz veya iş birliği teklifleriniz için bizimle iletişime geçebilirsiniz.',
    'contact.sendMessage': 'Mesaj Gönder',
    'contact.emailPlaceholder': 'E-posta adresin',
    'contact.messagePlaceholder': 'Mesajın',
    'contact.send': 'Gönder',
    'footer.tagline': 'Yurt hayatını kolaylaştırıyoruz.',
    'footer.copyright': '© 2024 Dormy. Tüm hakları saklıdır.',
    'messages.robotCheck': 'Lütfen robot olmadığınızı onaylayın.',
    'messages.invalidEmail': 'Lütfen geçerli bir e-posta adresi girin.',
    'messages.subscribeSuccess': 'Teşekkürler! E-posta listemize başarıyla kaydoldunuz.',
    'messages.messageShort': 'Mesajınız en az 10 karakter olmalıdır.',
    'messages.messageReady': 'Mesajınız hazırlandı. E-posta uygulamanız açılacak.'
  }
};

let currentLang = 'en';

function setLanguage(lang) {
  currentLang = lang;
  document.documentElement.lang = lang;
  
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.lang === lang);
  });

  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    if (translations[lang][key]) {
      el.innerHTML = translations[lang][key];
    }
  });

  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.dataset.i18nPlaceholder;
    if (translations[lang][key]) {
      el.placeholder = translations[lang][key];
    }
  });

  localStorage.setItem('dormy-lang', lang);
}

document.addEventListener('DOMContentLoaded', function() {
  const savedLang = localStorage.getItem('dormy-lang') || 'en';
  setLanguage(savedLang);

  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
  });

  const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
  const nav = document.querySelector('.nav');
  const navLinks = document.querySelectorAll('.nav-link');

  mobileMenuBtn.addEventListener('click', function() {
    this.classList.toggle('active');
    nav.classList.toggle('active');
  });

  navLinks.forEach(link => {
    link.addEventListener('click', function() {
      mobileMenuBtn.classList.remove('active');
      nav.classList.remove('active');
    });
  });

  const slides = document.querySelectorAll('.app-slide');
  const indicators = document.querySelectorAll('.indicator');
  let currentSlide = 0;
  const totalSlides = slides.length;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.toggle('active', i === index);
    });
    indicators.forEach((ind, i) => {
      ind.classList.toggle('active', i === index);
    });
  }

  function nextSlide() {
    currentSlide = (currentSlide + 1) % totalSlides;
    showSlide(currentSlide);
  }

  setInterval(nextSlide, 3000);

  indicators.forEach((indicator, index) => {
    indicator.addEventListener('click', () => {
      currentSlide = index;
      showSlide(currentSlide);
    });
  });

  const faqItems = document.querySelectorAll('.faq-item');

  faqItems.forEach(item => {
    const question = item.querySelector('.faq-question');
    
    question.addEventListener('click', function() {
      const isActive = item.classList.contains('active');
      
      faqItems.forEach(faq => faq.classList.remove('active'));
      
      if (!isActive) {
        item.classList.add('active');
      }
    });
  });

  const subscribeForm = document.getElementById('subscribeForm');
  const subscribeMessage = document.getElementById('subscribeMessage');

  subscribeForm.addEventListener('submit', function(e) {
    e.preventDefault();
  
    const email = document.getElementById('subscribeEmail').value;

    const humanCheck = document.getElementById('humanCheck').checked;
    
    if (!humanCheck) {
      showMessage(subscribeMessage, translations[currentLang]['messages.robotCheck'], 'error');
      return;
    }
    
    if (!isValidEmail(email)) {
      showMessage(subscribeMessage, translations[currentLang]['messages.invalidEmail'], 'error');
      return;
    }
  
  subscribeMessage.textContent = "..."
  fetch("https://formsubmit.co/ajax/batu.ruzgar.kara@gmail.com", {
      method: "POST",
      headers: { 
          'Content-Type': 'application/json',
          'Accept': 'application/json'
      },
      body: JSON.stringify({
          email: email,
          _subject: "Dormy - Yeni Abone Var!" // Mail başlığı
      })
  })
  .then(response => response.json())
  .then(data => {
      // Başarılı olursa senin başarı mesajın çalışsın
      showMessage(subscribeMessage, translations[currentLang]['messages.subscribeSuccess'], 'success');
      subscribeForm.reset();
      // Checkbox'ı da temizleyelim
      document.getElementById('humanCheck').checked = false;
  })
  .catch(error => {
      // Bir hata olursa
      console.log(error);
      showMessage(subscribeMessage, "Bir hata oluştu, lütfen tekrar deneyin.", 'error');
  });
    });

  // ----------------------------

  const contactForm = document.getElementById('contactForm');
  const contactFormMessage = document.getElementById('contactFormMessage');

  contactForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = document.getElementById('contactEmail').value;
    const message = document.getElementById('contactMessage').value;
    
    if (!isValidEmail(email)) {
      showMessage(contactFormMessage, translations[currentLang]['messages.invalidEmail'], 'error');
      return;
    }
    
    if (message.trim().length < 10) {
      showMessage(contactFormMessage, translations[currentLang]['messages.messageShort'], 'error');
      return;
    }
    
    contactFormMessage.textContent = "...";

    fetch("https://formsubmit.co/ajax/batu.ruzgar.kara@gmail.com", {
        method: "POST",
        headers: { 
            'Content-Type': 'application/json',
            'Accept': 'application/json'
        },
        body: JSON.stringify({
            email: email,       // Gönderen kişinin maili
            message: message,   // Yazdığı mesaj
            _subject: "Dormy - Yeni İletişim Mesajı" // Sana gelen mailin başlığı
        })
    })
    .then(response => response.json())
    .then(data => {
        // Başarı mesajını göster
        showMessage(contactFormMessage, translations[currentLang]['messages.messageReady'], 'success');
        contactForm.reset();
    })
    .catch(error => {
        console.log(error);
        showMessage(contactFormMessage, "Bir hata oluştu.", 'error');
    });
    });
  function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }

  function showMessage(element, text, type) {
    element.textContent = text;
    element.className = 'form-message ' + type;
    
    setTimeout(function() {
      element.className = 'form-message';
      element.textContent = '';
    }, 5000);
  }

  const header = document.querySelector('.header');

  window.addEventListener('scroll', function() {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll > 100) {
      header.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.15)';
    } else {
      header.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.08)';
    }
  });

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      
      if (target) {
        const headerHeight = header.offsetHeight;
        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - headerHeight;
        
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });
});
